(()=>{"use strict";var e={n:r=>{var s=r&&r.__esModule?()=>r.default:()=>r;return e.d(s,{a:s}),s},d:(r,s)=>{for(var t in s)e.o(s,t)&&!e.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:s[t]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r)};const r=require("react-dom/server");var s=e.n(r);const t=require("express");var n=e.n(t);const i=require("react-router-dom/server"),l=require("react-router-dom"),o=require("react/jsx-runtime"),a=()=>(0,o.jsxs)("ul",{children:[(0,o.jsx)("li",{children:(0,o.jsx)(l.Link,{to:"/red",children:"Red"})}),(0,o.jsx)("li",{children:(0,o.jsx)(l.Link,{to:"/blue",children:"Blue"})}),(0,o.jsx)("li",{children:(0,o.jsx)(l.Link,{to:"/users",children:"Users"})})]}),u=()=>(0,o.jsx)("div",{className:"Red",children:"Red"}),c=()=>(0,o.jsx)(u,{}),d=()=>(0,o.jsx)("div",{className:"Blue",children:"Blue"}),h=()=>(0,o.jsx)(d,{}),x=require("react"),p=require("react-redux"),j=require("axios");var m=e.n(j);require("redux-saga/effects");const v="users/GET_USERS_PENDING",g="users/GET_USERS_SUCCESS",S="users/GET_USERS+FAILURE",y="users/GET_USER",f=e=>({type:y,payload:e}),E=()=>async e=>{try{e({type:v});const r=await m().get("https://jsonplaceholder.typicode.com/users");e({type:g,payload:r})}catch(r){throw e({type:S,error:!0,payload:r}),r}},R={users:null,user:null,loading:{users:!1,user:!1},error:{users:null,user:null}},_=e=>{let{users:r}=e;return r?(0,o.jsx)("div",{children:(0,o.jsx)("ul",{children:r.map((e=>(0,o.jsx)("li",{children:(0,o.jsx)(l.Link,{to:"/users/".concat(e.id),children:e.username})},r.id)))})}):null},q=(0,x.createContext)(null),b=q,T=e=>{let{resolve:r}=e;const s=(0,x.useContext)(q);return s?(s.done||s.promises.push(Promise.resolve(r())),null):null},U=()=>{const e=(0,p.useSelector)((e=>e.users.users)),r=(0,p.useDispatch)();return(0,x.useEffect)((()=>{e||r(E())}),[r,e]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(_,{users:e}),(0,o.jsx)(T,{resolve:()=>r(E)})]})},k=e=>{let{user:r}=e;const{email:s,name:t,username:n}=r;return(0,o.jsxs)("div",{children:[(0,o.jsxs)("h1",{children:[n," (",t,")"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("b",{children:"e-mail"})," ",s]})]})},P=e=>{let{id:r}=e;const s=(0,p.useSelector)((e=>e.users.user)),t=(0,p.useDispatch)();return(0,x.useEffect)((()=>{s&&s.id===parseInt(r,10)||t(f(r))}),[t,r,s]),s?(0,o.jsx)(k,{user:s}):(0,o.jsx)(T,{resolve:()=>t(f(r))})},w=()=>{const{id:e}=(0,l.useParams)();return(0,o.jsx)(P,{id:e})},C=()=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(U,{}),(0,o.jsx)(l.Routes,{children:(0,o.jsx)(l.Route,{path:":id",element:(0,o.jsx)(w,{})})})]}),G=()=>(0,o.jsxs)("div",{children:[(0,o.jsx)(a,{}),(0,o.jsx)("hr",{}),(0,o.jsxs)(l.Routes,{children:[(0,o.jsx)(l.Route,{path:"/red",element:(0,o.jsx)(c,{})}),(0,o.jsx)(l.Route,{path:"/blue",element:(0,o.jsx)(h,{})}),(0,o.jsx)(l.Route,{path:"/users/*",element:(0,o.jsx)(C,{})})]})]}),L=require("path");var O=e.n(L);const D=require("fs");var N=e.n(D);const A=require("redux"),F=(0,A.combineReducers)({users:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case v:return{...e,loading:{...e.loading,users:!0}};case g:return{...e,loading:{...e.loading,users:!1},users:r.payload.data};case S:return{...e,loading:{...e.loading,users:!1},error:{...e.error,users:r.payload}};case y:return{...e,loading:{...e.loading,user:!0},error:{...e.error,user:null}};case"users/GET_USER_SUCCESS":return{...e,loading:{...e.loading,user:!1},user:r.payload};case"users/GET_USER_FAILURE":return{...e,loading:{...e.loading,user:!1},error:{...e.error,user:r.payload}};default:return e}}}),I=require("redux-thunk"),B=JSON.parse(N().readFileSync(O().resolve("./build/asset-manifest.json"),"utf8")),J=n()(),M=n().static(O().resolve("./build"),{index:!1});J.use(M),J.use((async(e,r,t)=>{const n=(0,A.createStore)(F,(0,A.applyMiddleware)(I.thunk)),l={done:!1,promises:[]},a=(0,o.jsx)(b.Provider,{value:l,children:(0,o.jsx)(p.Provider,{store:n,children:(0,o.jsx)(i.StaticRouter,{location:e.url,context:{},children:(0,o.jsx)(G,{})})})});s().renderToStaticMarkup(a);try{await Promise.all(l.promises)}catch(e){return r.status(500)}l.done=!0;const u=s().renderToString(a),c=JSON.stringify(n.getState()).replace(/</g,"\\u003c"),d="<script>__PRELOADED_STATE__ = ".concat(c,"<\/script>");r.send(function(e,r){return'<!DOCTYPE html>\n    <html lang="en">\n        <head>\n            <meta charset="utf-8" />\n            <link rel="shortcut icon" href="/favicon.ico" />\n            <meta\n                name="viewport"\n                contetn="width=device-width,initial-scale=1,shrink-to-fit=no"\n            />\n            <meta name="theme-color" content="#00000" />\n            <title>React App</title>\n            <link href="'.concat(B.files["main.css"],'" rel="stylesheet" />\n        </head>\n        <body>\n            <noscript>You need to enable JavaScript to run this app.</noscript>\n            <div id="root">').concat(e,"</div>\n            ").concat(r,'\n            <script src="').concat(B.files["main.js"],'"><\/script>\n        </body>\n    </html>;\n    ')}(u,d))})),J.listen(5e3,(()=>{console.log("Running on http://localhost:5000")}))})();